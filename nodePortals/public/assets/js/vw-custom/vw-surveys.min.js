(function(c,a,f){var b={idDtSurvey:"dt-survey",idxCurrentStep:-1,classTable:"table",classPanelStep:"panel-step-details",classStepProgressBar:"step-status-progress-bar",classContainerDataTable:"container-data-table",tmrThrottle:250,blAesFiledValid:false,blIsfFiledValid:false,lblHtml:'<label style="font-size: 1.2em;"><i class="fa $$ fa-2x"></i></label>',arrStepDates:[],arrStepEnable:[],radStepCircle:28,iStepLabelOffset:55,messageTitle:"<strong>Survey</strong><br />",objSpinner:null,objLadda:null,intSpinnerRemoveDelay:1000};var d=function(){if(c("#"+b.idDtSurvey).length){b.objSpinner=VWUtility.createSpinner("."+b.classContainerDataTable);var h=c("#"+b.idDtSurvey);h.dataTable({aaSorting:[[0,"asc"]],aoColumns:[null,null,{bSortable:false}],initComplete:function(j,i){setTimeout(function(){VWUtility.resetSpinner(b.objSpinner);c("."+b.classContainerDataTable).css("visibility","visible")},b.intSpinnerRemoveDelay)}});h.find("."+b.classAExpand).on({click:function(){handleRestaurantsRowExpandOrCollapse(this,h)}})}else{c("."+b.classContainerDataTable).css("visibility","visible")}};var e=function(i,m,k,l,h){var j=l;i.addStep(j,m,b.lblHtml.replace("$$",k),h)};var g=function(){var j=c("."+b.classStepProgressBar);j.empty();var i=b.idxCurrentStep;var k=b.lblHtml;c.fn.progressStep.defaults.radius=b.radStepCircle;c.fn.progressStep.defaults.labelOffset=b.iStepLabelOffset;var h=j.progressStep({"font-size":12});e(h,"createStep1","fa-book","Questions",b.arrStepEnable[0]);e(h,"createStep2","fa-thumbs-up","Survey",b.arrStepEnable[1]);e(h,"createStep3","fa-star","Schedule",b.arrStepEnable[2]);if(i>=0){h.setCurrentStep(i)}h.refreshLayout()};a.setStepDatesArrayValue=function(h){b.arrStepDates.push(h)};a.setAesFiledValid=function(h){b.blAesFiledValid=h};a.setIsfFiledValid=function(h){b.blIsfFiledValid=h};a.setCurrentStep=function(h){if(b.blAesFiledValid||b.blIsfFiledValid){b.idxCurrentStep=h}else{if(h>3){b.idxCurrentStep=(h-1)}else{b.idxCurrentStep=h}}};a.deleteSurvey=function(k,j,h){var i=this;bootbox.confirm(b.messageTitle+'Would you like to delete survey "'+j+'" ?',function(l){if(l){$btn=c(h);b.objLadda=Ladda.create($btn.get(0));b.objLadda.start();c.ajax({url:"/survey/"+k+"/destroy",success:function(m){if(m.indexOf("error")===-1){VWUtility.resetLadda(b.objLadda);location.href="/survey?status=deleted"}else{VWUtility.resetLadda(b.objLadda);console.log(m)}}})}})};a.setStepEnableArrayValue=function(h){b.arrStepEnable.push(h)};a.setupComponents=function(){g()};a.init=function(){d();c(window).resize(c.throttle(b.tmrThrottle,this.setupComponents))};a.init()}(jQuery,window.VWSurveys=window.VWSurveys||{}));