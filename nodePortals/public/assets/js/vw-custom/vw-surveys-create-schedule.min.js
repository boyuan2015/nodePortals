(function(e,a,g){var b={idFormCreate:"frmCreateSchedule",idBtnCreate:"btnCreateSchedule",idStartDatePickerControl:"fixedStartDate",idEndDatePickerControl:"fixedEndDate",idStartTimePickerControl:"fixedStartTime",idEndTimePickerControl:"fixedEndTime",objLadda:null};var d=function(){var h=new Date();e("#"+b.idStartDatePickerControl).val((h.getMonth()+1)+"/"+h.getDate()+"/"+h.getFullYear());e("#"+b.idEndDatePickerControl).val((h.getMonth()+1)+"/"+h.getDate()+"/"+h.getFullYear());e("#"+b.idStartDatePickerControl).datepicker();e("#"+b.idEndDatePickerControl).datepicker();e("#"+b.idStartTimePickerControl).val(h.getHours()+":"+h.getMinutes()+":00");e("#"+b.idEndTimePickerControl).val(h.getHours()+":"+h.getMinutes()+":00");e("#"+b.idStartTimePickerControl).timepicker({minuteStep:1,appendWidgetTo:"body",showSeconds:true,showMeridian:false,defaultTime:false});e("#fixedEndTime").timepicker({minuteStep:1,appendWidgetTo:"body",showSeconds:true,showMeridian:false,defaultTime:false});e("#"+b.idBtnCreate).click(function(){var i=e(this);e("#"+b.idFormCreate).validate({submitHandler:function(l){var n=e("#"+b.idStartDatePickerControl).val()+" "+e("#"+b.idStartTimePickerControl).val();var k=e("#"+b.idEndDatePickerControl).val()+" "+e("#"+b.idEndTimePickerControl).val();var j=new Date(n);var m=new Date(k);if(m<=j){VWUtility.errorToast("Start date should less than end date.");return}b.objLadda=Ladda.create(i.get(0));b.objLadda.start();c(l)}})})};var c=function(i){var h={success:function(j){if((j!=null)&&(j.toLowerCase().indexOf("error")===-1)){window.location.href="/survey/schedule?status=scheduled"}else{if(j!=null){VWUtility.showDismissibleAlert("#panel-body",VWUtility.getAlertTypes().ALERT_TYPE_DANGER,"Error:","Could not schedule the Survey.");VWUtility.resetLadda(b.objLadda);console.log("Error #1: "+j)}}},error:function(){VWUtility.showDismissibleAlert("#panel-body",VWUtility.getAlertTypes().ALERT_TYPE_DANGER,"Error:","Could not schedule the Survey.");VWUtility.resetLadda(b.objLadda);console.log("Error #2")}};e(i).ajaxSubmit(h)};var f=function(){d();e("#liRestaurants, #liSelectedRestaurant, #liSurvey").addClass("open, active").find("ul:first").css("display","block")};f()}(jQuery,window.VWSurveyCreateSchedule=window.VWSurveyCreateSchedule||{}));