(function(f,a,h){var c={idFormCreate:"frmCreateSurvey",idBtnCreate:"btnGotoComplete",idStartDatePickerControl:"fixedStartDate",idEndDatePickerControl:"fixedEndDate",idStartTimePickerControl:"fixedStartTime",idEndTimePickerControl:"fixedEndTime",objLadda:null};var e=function(){var i=new Date();f("#"+c.idStartDatePickerControl).val((i.getMonth()+1)+"/"+i.getDate()+"/"+i.getFullYear());f("#"+c.idEndDatePickerControl).val((i.getMonth()+1)+"/"+i.getDate()+"/"+i.getFullYear());f("#"+c.idStartDatePickerControl).datepicker();f("#"+c.idEndDatePickerControl).datepicker();f("#"+c.idStartTimePickerControl).val(i.getHours()+":"+i.getMinutes()+":00");f("#"+c.idEndTimePickerControl).val(i.getHours()+":"+i.getMinutes()+":00");f("#"+c.idStartTimePickerControl).timepicker({minuteStep:1,appendWidgetTo:"body",showSeconds:true,showMeridian:false,defaultTime:false});f("#fixedEndTime").timepicker({minuteStep:1,appendWidgetTo:"body",showSeconds:true,showMeridian:false,defaultTime:false});f("#"+c.idBtnCreate).click(function(){var j=f(this);f("#"+c.idFormCreate).validate({submitHandler:function(m){var o=f("#"+c.idStartDatePickerControl).val()+" "+f("#"+c.idStartTimePickerControl).val();var l=f("#"+c.idEndDatePickerControl).val()+" "+f("#"+c.idEndTimePickerControl).val();var k=new Date(o);var n=new Date(l);if(n<=k){VWUtility.showDismissibleAlert("#panel-body",VWUtility.getAlertTypes().ALERT_TYPE_DANGER,"Error:","Start date should less than end date.");return}d(m)}})})};var d=function(k){var j=f("#"+c.idBtnCreate);c.objLadda=Ladda.create(j.get(0));c.objLadda.start();var i={success:function(l){if((l!=null)&&(l.toLowerCase().indexOf("error")===-1)){VWUtility.resetLadda(c.objLadda);VWUtility.showDismissibleAlert("#panel-body",VWUtility.getAlertTypes().ALERT_TYPE_SUCCESS,"Success:","Created Survey.");window.location.href="/survey/schedule?status=created"}else{if(l!=null){VWUtility.resetLadda(c.objLadda);VWUtility.showDismissibleAlert("#panel-body",VWUtility.getAlertTypes().ALERT_TYPE_DANGER,"Error:","Could not create a new Survey.");console.log("Error #1: "+l)}}},error:function(){VWUtility.showDismissibleAlert("#panel-body",VWUtility.getAlertTypes().ALERT_TYPE_DANGER,"Error:","Could not create a new Survey.");console.log("Error #2")}};f(k).ajaxSubmit(i)};var b=function(){VWSurveys.setStepEnableArrayValue("true");VWSurveys.setStepEnableArrayValue("true");VWSurveys.setCurrentStep(2);VWSurveys.setupComponents()};var g=function(){e();b();f("svg").height(100)};g()}(jQuery,window.VWVWSurveyCreate=window.VWVWSurveyCreate||{}));